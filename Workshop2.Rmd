---
title: "MB5370 Module 04. Workshop 2 - Using ggplot2 for communication"
author: "Shreyash G Bhandary"
date: "2024-05-15"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(dev = "png",
                      dpi = 300,
                     echo = TRUE,
                     cache = TRUE)
```

```{r}
# Load ggplot2 package
library(ggplot2)
```

#Adding a title for your ggplot 
```{r}
ggplot(mpg, aes(displ,hwy)) +
  geom_point(aes(colour = class)) +
  geom_smooth(se.e = FALSE) + 
  labs(title = "Fuel efficiency generally decreases with engine size")
```

#Adding a sub-title and a caption

```{r}
ggplot(mpg, aes(displ,hwy)) + 
  geom_point(aes(colour = class)) + 
  geom_smooth(se = FALSE) + 
  labs(
    title = "Fuel efficiency generally decreased with engine size",
    subtitle = "Two seaters (sports cars) are an exception because of their light weight",
    caption = "data from fueleconomy.gov"
  )
```

#labs() is used to replace the axis and legend titles

```{r}
ggplot(mpg, aes(displ, hwy)) + 
  geom_point(aes(colour = class)) + 
  geom_smooth(se = FALSE) + 
  labs(
    x = "Engine Displacement (L)", 
    y = "Highway Fuel Economy (mpg)", 
    colour = "Car Type"
  )
```
```{r}
library(dplyr) # for data manipulation functions
library(magrittr) # for the %>%
```

#Adding annotations in your plot using the geom_text()
```{r}
best_in_class <- mpg %>%
  group_by(class) %>%
  filter(row_number(desc(hwy)) == 1)

ggplot(mpg, aes(displ, hwy)) + 
  geom_point(aes(colour = class)) + 
  geom_text(aes(label = model), data = best_in_class)
```

##Scales 
#R automatically adds the scale when you code the ggplot.
```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class))
```

#Tweaking the scales. 
```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class)) +
  scale_x_continuous() +
  scale_y_continuous() +
  scale_colour_discrete()
```
#Axis Ticks 
```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  scale_y_continuous(breaks = seq(15, 40, by = 5))
  # seq(lower limit, upper limit, by = interval)
```


```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point() +
  scale_x_continuous(labels = NULL) +
  scale_y_continuous(labels = NULL)
```

#Legends and colour schemes 

```{r}
base <- ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(colour = class))

base + theme(legend.position = "left")
base + theme(legend.position = "top")
base + theme(legend.position = "bottom")
base + theme(legend.position = "right")
```

#Replacing a scale 

```{r}
ggplot(diamonds, aes(carat, price)) +
  geom_bin2d() + 
  scale_x_log10() + 
  scale_y_log10()
```

#Customizing the colour scale for better visualisation.
```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = drv))

ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = drv)) +
  scale_colour_brewer(palette = "Set1")
```

#Redundant shape mapping
```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = drv, shape = drv)) +
  scale_colour_brewer(palette = "Set1")
```

#Setting a colour palatte of your own using a set of pre-defined colours.
```{r}
presidential %>%
  mutate(id = 33 + row_number()) %>%
  ggplot(aes(start, id, colour = party)) +
    geom_point() +
    geom_segment(aes(xend = end, yend = id)) +
    scale_colour_manual(values = c(Republican = "red", Democratic = "blue"))
```

#Installing the Viridis & Hexbin packages.
```{r}
#install.packages('viridis')
#install.packages('hexbin')
library(viridis)
library(hexbin)
```

#Trying out the new viridis packages. 
```{r}
df <- tibble( # note we're just making a fake dataset so we can plot it
  x = rnorm(10000),
  y = rnorm(10000)
)
ggplot(df, aes(x, y)) +
  geom_hex() + # a new geom!
  coord_fixed()

ggplot(df, aes(x, y)) +
  geom_hex() +
  viridis::scale_fill_viridis() +
  coord_fixed()
```


##Themes

#Using the default themes 
```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = class)) +
  geom_smooth(se = FALSE) +
  theme_bw()
```

```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = class)) +
  geom_smooth(se = FALSE) +
  theme_light()
```

```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = class)) +
  geom_smooth(se = FALSE) +
  theme_classic()
```

```{r}
ggplot(mpg, aes(displ, hwy)) +
  geom_point(aes(color = class)) +
  geom_smooth(se = FALSE) +
  theme_dark()
```


#Ben's Theme 
```{r}
 theme (panel.border = element_blank(),
        panel.grid.minor.x = element_blank(),
        panel.grid.minor.y = element_blank(),
        legend.position="bottom",
        legend.title=element_blank(),
        legend.text=element_text(size=8),
        panel.grid.major = element_blank(),
        legend.key = element_blank(),
        legend.background = element_blank(),
        axis.text.y=element_text(colour="black"),
        axis.text.x=element_text(colour="black"),
        text=element_text(family="Arial"))
```

#Theme from jrnold in GitHub 
```{r}
#install.packages("devtools")
#library("devtools")
#(c("hadley/ggplot2", "jrnold/ggthemes"))
```

# Setting up a knitr to save all the graph outputs 
```{r}

```























